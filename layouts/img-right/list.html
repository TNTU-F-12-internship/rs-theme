{{ define "header" }}{{ partial "page-header.html" . }}{{ end }}

{{ define "main" }}

<div class="flex-l mt2 mw8 center">
    <article class="center cf pt4 pb5 ph3 ph4-ns">
        <div class="nested-copy-line-height lh-copy f3 nested-links {{ $.Param "text_color" | default "dark-gray" }}">
        {{ .Content }}
        </div>
    </article>
</div>

{{/* Define a section to pull recent posts from. For Hugo 0.20 this will default to the section with the most number of pages. */}}
{{/* Searching in "img-right" folder. */}}
{{ $mySections := slice "img-right" }}

{{/* Create a variable with that section to use in multiple places. */}}
{{ $section := where .Site.RegularPages "Section" "in" $mySections }}

{{/* Check to see if the section is defined for ranging through it */}}
{{ $section_count := len $section }}

{{ if ge $section_count 1 }}

<div class="pa3 pa4-ns w-100 w-70-ns center">

    <section class="w-100 mw9">
        {{/* Range through the section */}}
        {{ range $section }}
        <div class="relative w-100 mb4">
            {{ .Render "section-image-right" }}
        </div>
        {{ end }}
    </section>

</div>
{{ end }}

<div class="center mt2 tc f3 fw4 lh-title" style="color:{{ $.Param "middle_title_color_code" | default "#555555" }};">
    {{ .Params.final_message }}
</div>

{{ end }}